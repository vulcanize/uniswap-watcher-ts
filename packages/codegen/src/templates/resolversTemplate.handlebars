import assert from 'assert';
import BigInt from 'apollo-type-bigint';
import debug from 'debug';

import { Indexer, ValueResult } from './indexer';

const log = debug('vulcanize:resolver');

export const createResolvers = async (indexer: Indexer): Promise<any> => {
	assert(indexer);

	return {
		BigInt: new BigInt('bigInt'),

		Event: {
			__resolveType: (obj: any) => {
				assert(obj.__typename);

				return obj.__typename;
			}
		},

		Subscription: {
			onEvent: {
				subscribe: () => indexer.getEventIterator()
			}
		},

		Query: {

		}
	};
};
